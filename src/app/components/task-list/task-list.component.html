<!DOCTYPE html>




<div [class.alternative]="this.theme">


  <br>
  <div class="title" align="center">
    <mat-card color="primary">
      {{project[this.indexForProj].title}}
    </mat-card>
  </div>

  <div align="center">

    <button mat-fab color="primary" aria-label="New Task" (click)=" onCreate()" matTooltip="Add new Task" >
      <mat-icon>add</mat-icon>
    </button>

  </div>


  <div align="center" class="marg">
    <div style="width:50%; align: center">
      <mat-form-field>
        <mat-label>Sort</mat-label>
        <mat-select>
          <mat-option >
            Sort
          </mat-option>
          <mat-option (click)="queueByPriority()">
            Priority
          </mat-option>
          <mat-option (click)="queueByNew()">
            Newest
          </mat-option>
          <mat-option (click)="queueByOld()">
            Oldest
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>




  <div cdkDropList class = "Tasks" (cdkDropListDropped) = "drop($event)">

    <div *ngFor="let task of project[this.indexForProj].tasks let idx =index" cdkDrag>

      <mat-card [class.strike]="task.completed">

        <mat-accordion>

          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title align="center">

                <h1>  {{task.title}} </h1>


              </mat-panel-title>
              <mat-panel-description style="display: flex;justify-content: space-between">
                Click to see description
                <mat-chip-list style="padding: 4px">
                  <mat-chip color="primary" selected>Priority: {{task.priority}}</mat-chip>
                </mat-chip-list>
              </mat-panel-description>

            </mat-expansion-panel-header>
            <div style="display: flex; justify-content: space-evenly" >
              <h1>
                {{task.description}}
              </h1>
            </div>
              <div style="display: flex; justify-content: space-evenly ; height: 50px; padding-top: 3px">
                <button mat-mini-fab color="primary" (click)="onEdit(task)" matTooltip="Edit Task"><mat-icon>edit</mat-icon></button>
                <button mat-mini-fab color="primary" (click)="completeTask(task)"  matTooltip="Complete Task"><mat-icon>check</mat-icon></button>
                <button mat-mini-fab color="primary" (click)="deleteTask(task)" matTooltip="Delete Task"><mat-icon>delete</mat-icon></button>



            </div>





            <mat-card-actions class="mat-action-row" style="display: flex; justify-content: space-between; height: 50px; padding: 5px">
              <div class = "upCounter" >
                <app-stopwatch></app-stopwatch>
              </div>
              <div class="countdowntimer" align="left">
                <button mat-raised-button color="primary" (click)=" cd1.begin()"
                        (dblclick)="cd1.restart()"  class="btn btn-link btn-sm" style="padding: 6px; width: 35px"
                matTooltip="Click to start task timer. Notification will pop up when complete">
                  <mat-icon>alarm</mat-icon>
                  <countdown #cd1 [config]="{leftTime: (task.countdownTimer), demand: true}" (event)="handleEvent($event)"></countdown>
                </button>



              </div>
              <div  align="center">
                <app-dueDate ></app-dueDate>
              </div>


            </mat-card-actions>
            <mat-card-actions>




            </mat-card-actions>







          </mat-expansion-panel>
        </mat-accordion>

      </mat-card>
    </div>

  </div>
  <div align="center" class="marg">
  <mat-button-toggle-group appearance="legacy" name="fontStyle" aria-label="Font Style">


    <mat-button-toggle value="italic"  (click)="queueByCompleted()">Current Tasks</mat-button-toggle>

    <mat-button-toggle value="underline" (click)="queueByAll()">All Tasks</mat-button-toggle>
  </mat-button-toggle-group>
</div>




</div>
